$(document).ready(function () { $("#currentDay").text(moment().format("dddd, LL")); $("#loginSubmit").on("click", function (t) { t.preventDefault(), console.log("You clicked it!"); let e = $("input#email"), a = $("input#password"); t = { email: e.val().trim(), password: a.val().trim() }; t.email && t.password && (e.val(""), a.val(""), $.ajax("/api/login", { type: "POST", data: t }).then(function () { window.location.replace("/dashboard") }).catch(function (t) { alert("Click the 'Sign Up' link below to create a Pill Box account."), console.log(t) })) }), $("#signUpSubmit").on("click", function (t) { t.preventDefault(), console.log("You clicked sign up!"); let e = $("input#email"), a = $("input#password"); t = { email: e.val().trim(), password: a.val().trim() }; t.email && t.password && (e.val(""), a.val(""), $.ajax("/api/signup", { type: "POST", data: t }).then(function () { console.log("created user"), window.location.href = "/dashboard" })) }), $.get(), $.get("/api/user_data").then(function (t) { $(".member-name").text(t.email), $(".member-name").attr("data-id", t.id), $("#lastLogin").text(moment(t.updatedAt).format("dddd, LL")), $("#lastLogin").attr("data-id", t.id) }), $("#addPatient").on("click", function (t) { t.preventDefault(), console.log("You clicked add patient!"); t = { name: $("#patientName").val().trim(), UserId: $(".member-name").data("id") }; console.log("New Patient Info:", t), $.ajax("/api/patient", { type: "POST", data: t }).then(function () { console.log("created patient"), location.reload() }) }), $.get(), $("#addMedication").on("click", function (t) { t.preventDefault(); t = document.URL.split("/"), t = t[t.length - 1]; console.log("URL PARAMS :", t), window.location.href = "/addmedication/" + t }), $("#submit-medication").on("click", function (t) { t.preventDefault(); t = document.URL.split("/"), t = t[t.length - 1]; console.log("URL PARAMS :", t); let e = $("input#med_name"), a = $("input#dosage"), n = $("select#timesPD"), o = $("select#withFood"), i = $("textarea#notes"); t = { med_name: e.val().trim(), dosage: a.val().trim(), timesPD: n.val(), withFood: o.val(), taken: 0, notes: i.val().trim(), PatientId: t }; $.ajax("/api/medication", { type: "POST", data: t }).then(function (t) { window.location.href = "/patientrecord/" + t.PatientId }) }), $("#back-to-prev-page").on("click", function (t) { t.preventDefault(); t = document.URL.split("/"), t = t[t.length - 1]; console.log("URL PARAMS :", t), window.location.href = "/patientrecord/" + t }) });